{"ast":null,"code":"var _this = this;\n\nimport { FETCH_ERROR, FETCH_START, FETCH_SUCCESS, INIT_URL, SIGNOUT_USER_SUCCESS, USER_DATA, USER_TOKEN_SET } from \"../../constants/ActionTypes\";\nimport axios from 'axios';\nvar baseURL = 'http://74.127.61.115:9900/graphql';\nexport var setInitUrl = function setInitUrl(url) {\n  return {\n    type: INIT_URL,\n    payload: url\n  };\n};\nexport var userSignUp = function userSignUp(_ref) {\n  var email = _ref.email,\n      password = _ref.password,\n      name = _ref.name;\n  return function (dispatch) {\n    dispatch({\n      type: FETCH_START\n    });\n    axios.post(baseURL, {\n      variables: {\n        email: email,\n        password: password,\n        username: name\n      },\n      query: \"\\n        mutation createUser($username: String!, $email: String!, $password: String!) {\\n          signUp(username: $username, email: $email, password: $password) {\\n            token\\n          } \\n        }\\n      \"\n    }).then(function (_ref2) {\n      var data = _ref2.data;\n\n      if (data.data) {\n        localStorage.setItem(\"token\", data.data.signUp.token);\n        axios.defaults.headers.common['x-token'] = data.data.signUp.token;\n        axios.defaults.headers.common['token'] = data.data.signUp.token;\n        dispatch({\n          type: FETCH_SUCCESS\n        });\n        dispatch({\n          type: USER_TOKEN_SET,\n          payload: data.data.signUp.token\n        });\n      } else {\n        console.log(\"payload: data.error\", data);\n        dispatch({\n          type: FETCH_ERROR,\n          payload: \"Network Error\"\n        });\n      }\n    }).catch(function (error) {\n      dispatch({\n        type: FETCH_ERROR,\n        payload: error.message\n      });\n      console.log(\"Error****:\", error.message);\n    });\n  };\n};\nexport var userSignIn = function userSignIn(_ref3) {\n  var username = _ref3.username,\n      password = _ref3.password;\n  return function (dispatch) {\n    dispatch({\n      type: FETCH_START\n    });\n    axios.post(baseURL, {\n      variables: {\n        username: username,\n        password: password\n      },\n      query: \"\\n            mutation signUserIn($username: String!, $password: String!){\\n              signIn(login: $username, password: $password) {\\n                token\\n              }\\n            }\\n          \"\n    }).then(function (_ref4) {\n      var data = _ref4.data;\n      console.log(data.data);\n\n      if (data.data) {\n        localStorage.setItem(\"token\", data.data.signIn.token);\n        axios.defaults.headers.common['x-token'] = data.data.signIn.token;\n        axios.defaults.headers.common['token'] = data.data.signIn.token;\n        dispatch({\n          type: FETCH_SUCCESS\n        });\n        dispatch({\n          type: USER_TOKEN_SET,\n          payload: data.data.signIn.token\n        });\n\n        _this.props.history.push('/');\n      } else {\n        dispatch({\n          type: FETCH_ERROR,\n          payload: data.error\n        });\n      }\n    }).catch(function (error) {\n      dispatch({\n        type: FETCH_ERROR,\n        payload: error.message\n      });\n      console.log(\"Error****:\", error);\n    });\n  };\n};\nexport var getUser = function getUser() {\n  return function (dispatch) {\n    dispatch({\n      type: FETCH_START\n    });\n    axios.post('auth/me').then(function (_ref5) {\n      var data = _ref5.data;\n      console.log(\"userSignIn: \", data);\n\n      if (data.result) {\n        dispatch({\n          type: FETCH_SUCCESS\n        });\n        dispatch({\n          type: USER_DATA,\n          payload: data.user\n        });\n      } else {\n        dispatch({\n          type: FETCH_ERROR,\n          payload: data.error\n        });\n      }\n    }).catch(function (error) {\n      dispatch({\n        type: FETCH_ERROR,\n        payload: error.message\n      });\n      console.log(\"Error****:\", error.message);\n    });\n  };\n};\nexport var userSignOut = function userSignOut() {\n  return function (dispatch) {\n    dispatch({\n      type: FETCH_START\n    });\n    setTimeout(function () {\n      localStorage.removeItem(\"token\");\n      dispatch({\n        type: FETCH_SUCCESS\n      });\n      dispatch({\n        type: SIGNOUT_USER_SUCCESS\n      });\n    }, 2000);\n  };\n};","map":{"version":3,"sources":["/home/jesus/Documentos/remesas-app/src/appRedux/actions/Auth.js"],"names":["FETCH_ERROR","FETCH_START","FETCH_SUCCESS","INIT_URL","SIGNOUT_USER_SUCCESS","USER_DATA","USER_TOKEN_SET","axios","baseURL","setInitUrl","url","type","payload","userSignUp","email","password","name","dispatch","post","variables","username","query","then","data","localStorage","setItem","signUp","token","defaults","headers","common","console","log","catch","error","message","userSignIn","signIn","props","history","push","getUser","result","user","userSignOut","setTimeout","removeItem"],"mappings":"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","sourcesContent":["import {\n  FETCH_ERROR,\n  FETCH_START,\n  FETCH_SUCCESS,\n  INIT_URL,\n  SIGNOUT_USER_SUCCESS,\n  USER_DATA,\n  USER_TOKEN_SET\n} from \"../../constants/ActionTypes\";\nimport axios from 'axios';\nconst baseURL = 'http://74.127.61.115:9900/graphql';\nexport const setInitUrl = (url) => {\n  return {\n    type: INIT_URL,\n    payload: url\n  };\n};\n\nexport const userSignUp = ({email, password, name}) => {\n  return (dispatch) => {\n    dispatch({type: FETCH_START});\n    axios.post(baseURL,{\n      variables:{ \n        email: email,\n        password: password,\n        username: name\n      },\n      query:`\n        mutation createUser($username: String!, $email: String!, $password: String!) {\n          signUp(username: $username, email: $email, password: $password) {\n            token\n          } \n        }\n      `\n    }).then(({data}) => {\n      if (data.data) {\n        localStorage.setItem(\"token\", data.data.signUp.token);\n        axios.defaults.headers.common['x-token'] = data.data.signUp.token;\n        axios.defaults.headers.common['token'] = data.data.signUp.token;\n        dispatch({type: FETCH_SUCCESS});\n        dispatch({type: USER_TOKEN_SET, payload: data.data.signUp.token});\n      } else {\n        console.log(\"payload: data.error\", data);\n        dispatch({type: FETCH_ERROR, payload: \"Network Error\"});\n      }\n    }).catch(function (error) {\n      dispatch({type: FETCH_ERROR, payload: error.message});\n      console.log(\"Error****:\", error.message);\n    });\n  }\n};\nexport const userSignIn = ({username, password}) => {\n  return (dispatch) => {\n    dispatch({type: FETCH_START});\n    axios.post(baseURL,{ \n        variables:{\n          username:username,\n          password:password\n        },\n          query:`\n            mutation signUserIn($username: String!, $password: String!){\n              signIn(login: $username, password: $password) {\n                token\n              }\n            }\n          `\n      }\n    ).then(({data}) => {\n      console.log(data.data)\n      if (data.data) {\n        localStorage.setItem(\"token\", data.data.signIn.token);\n        axios.defaults.headers.common['x-token'] = data.data.signIn.token;\n        axios.defaults.headers.common['token'] = data.data.signIn.token;\n        dispatch({type: FETCH_SUCCESS});\n        dispatch({type: USER_TOKEN_SET, payload: data.data.signIn.token});\n        this.props.history.push('/')\n      } else {\n        dispatch({type: FETCH_ERROR, payload: data.error});\n      }\n    }).catch(function (error) {\n      dispatch({type: FETCH_ERROR, payload: error.message});\n      console.log(\"Error****:\", error);\n    });\n  }\n};\n\nexport const getUser = () => {\n  return (dispatch) => {\n    dispatch({type: FETCH_START});\n    axios.post('auth/me',\n    ).then(({data}) => {\n      console.log(\"userSignIn: \", data);\n      if (data.result) {\n        dispatch({type: FETCH_SUCCESS});\n        dispatch({type: USER_DATA, payload: data.user});\n      } else {\n        dispatch({type: FETCH_ERROR, payload: data.error});\n      }\n    }).catch(function (error) {\n      dispatch({type: FETCH_ERROR, payload: error.message});\n      console.log(\"Error****:\", error.message);\n    });\n  }\n};\n\n\nexport const userSignOut = () => {\n  return (dispatch) => {\n    dispatch({type: FETCH_START});\n    setTimeout(() => {\n      localStorage.removeItem(\"token\");\n      dispatch({type: FETCH_SUCCESS});\n      dispatch({type: SIGNOUT_USER_SUCCESS});\n    }, 2000);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}